<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="src/css/styles.css" />
    <title>Document</title>
  </head>
  <body>
    <img
      class="main-screen"
      width="100%"
      src="images/Main_screen2.png"
      alt="MainScreen"
      usemap="#mainmap"
      id="main-screen"
    />

    <div class="watermark">
      This is a demostration page
      <br />
      For project started on Upwork
      <br />
      2024
    </div>

    <!-- Glowing Markers -->
    <div
      class="marker"
      style="top: 365px; left: 668px"
      id="marker-fort-amsterdam"
    >
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <div class="marker" style="top: 365px; left: 668px" id="marker-church">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Church -->
    <div class="marker" style="top: 365px; left: 668px" id="marker-broadway">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div
      class="marker"
      style="top: 365px; left: 668px"
      id="marker-company-garden"
    >
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div class="marker" style="top: 365px; left: 668px" id="marker-the-wall">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div class="marker" style="top: 365px; left: 668px" id="marker-canal">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div
      class="marker"
      style="top: 365px; left: 668px"
      id="marker-kierstede-house"
    >
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div
      class="marker"
      style="top: 365px; left: 668px"
      id="marker-house-of-enslaved-workers"
    >
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div class="marker" style="top: 365px; left: 668px" id="marker-dock">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div class="marker" style="top: 365px; left: 668px" id="marker-city-hall">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->
    <div class="marker" style="top: 365px; left: 668px" id="marker-about">
      <div class="marker-inner"></div>
      <!-- White dot inside the red marker -->
    </div>
    <!-- Marker for Broadway -->

    <map name="mainmap" id="image-map">
      <area
        shape="circle"
        coords="678,375,15"
        alt="FortAmsterdam"
        id="fort-amsterdam"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="690,459,14"
        alt="Church"
        id="church"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="862,336,13"
        alt="Broadway"
        id="broadway"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="1348,207,17"
        alt="CompanyGarden"
        id="company-garden"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="1462,512,17"
        alt="TheWall"
        id="the-wall"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="1026,593,16"
        alt="Canal"
        id="canel"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="675,671,14"
        alt="KierstedeHouse"
        id="kierstede-house"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="1009,719,15"
        alt="HouseOfEnslavedWorkers"
        id="house-of-enslaved-workers"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="692,775,13"
        alt="Dock"
        id="dock"
        onclick="playVideo(this.id)"
      />
      <area
        shape="circle"
        coords="957,849,14"
        alt="CityHall"
        id="city-hall"
        onclick="playVideo(this.id)"
      />
      <area
        shape="rect"
        coords="29,1005,148,1055"
        alt="About"
        id="about"
        onclick="playVideo(this.id)"
      />
    </map>

    <video
      width="100%"
      autoplay
      id="fort-amsterdam-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Fort.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="church-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Church.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="broadway-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Broadway.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="company-garden-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Garden.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="the-wall-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Wall_Final.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="canel-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Canel.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="kierstede-house-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Kierstede.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="house-of-enslaved-workers-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/HouseEnslaved_Final.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="dock-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/Dock.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="city-hall-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/CityHall.webm" type="video/webm" />
    </video>
    <video
      width="100%"
      autoplay
      id="about-video"
      style="display: none"
      onended="closeVideo(this.id)"
    >
      <source src="vids/AboutFinalFinal.webm" type="video/webm" />
    </video>
  </body>
  <script>
    // Call the initialize function on window load and resize
    window.onload = initialize;
    window.onresize = initialize;

    function playVideo(clicked_id) {
      hideMarkers();
      let video_id = clicked_id.concat("-video");
      const element = document.getElementById(video_id);

      const main_element = document.getElementById("main-screen");
      main_element.style.display = "none";

      element.style.display = "block";
      element.currentTime = 0;
      element.play();
      //openFullscreen(element);
    }

    function closeVideo(video_id) {
      const element = document.getElementById(video_id);
      element.style.display = "none";
      const main_element = document.getElementById("main-screen");
      main_element.style.display = "block";
      showMarkers();
    }

    function openFullscreen(elem) {
      if (elem.requestFullscreen) {
        elem.requestFullscreen();
      } else if (elem.webkitRequestFullscreen) {
        /* Safari */
        elem.webkitRequestFullscreen();
      } else if (elem.msRequestFullscreen) {
        /* IE11 */
        elem.msRequestFullscreen();
      }
    }

    var mainElement = document.documentElement;
    function openFull() {
      if (mainElement.requestFullscreen) {
        mainElement.requestFullscreen();
      } else if (mainElement.webkitRequestFullscreen) {
        /* Safari */
        mainElement.webkitRequestFullscreen();
      } else if (mainElement.msRequestFullscreen) {
        /* IE11 */
        mainElement.msRequestFullscreen();
      }
    }

    function closeFull() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.webkitExitFullscreen) {
        /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {
        /* IE11 */
        document.msExitFullscreen();
      }
    }

    const originalWidth = 1920;
    const originalHeight = 1080;

    const image = document.getElementById("main-screen");
    const map = document.getElementById("image-map");
    const areas = map.getElementsByTagName("area");

    function resizeImageMap() {
      const imageWidth = image.clientWidth;
      const imageHeight = image.clientHeight;

      const widthScale = imageWidth / originalWidth;
      const heightScale = imageHeight / originalHeight;

      for (let i = 0; i < areas.length; i++) {
        const coords = areas[i].getAttribute("coords").split(",").map(Number);
        const newCoords = coords.map((coord, index) =>
          index % 2 === 0 ? coord * widthScale : coord * heightScale
        );
        areas[i].setAttribute("coords", newCoords.join(","));
      }
    }

    const markers = [
      { id: "marker-fort-amsterdam", top: 365, left: 668 }, // Fort Amsterdam
      { id: "marker-church", top: 449, left: 680 }, // Church
      { id: "marker-broadway", top: 326, left: 852 }, // Broadway
      { id: "marker-company-garden", top: 197, left: 1338 }, // Company Garden
      { id: "marker-the-wall", top: 502, left: 1452 }, // The Wall
      { id: "marker-canal", top: 583, left: 1016 }, // Canal
      { id: "marker-kierstede-house", top: 661, left: 665 }, // Kierstede House
      { id: "marker-house-of-enslaved-workers", top: 709, left: 999 }, // House of Enslaved Workers
      { id: "marker-dock", top: 765, left: 682 }, // Dock
      { id: "marker-city-hall", top: 839, left: 947 }, // City Hall
      { id: "marker-about", top: 995, left: 88 }, // About
    ];

    function resizeMarkers() {
      const image = document.getElementById("main-screen");
      const imageWidth = image.clientWidth;
      const imageHeight = image.clientHeight;

      // Scale factors
      const widthScale = imageWidth / originalWidth;
      const heightScale = imageHeight / originalHeight;

      // Resize each marker based on scale
      markers.forEach((marker) => {
        const markerElement = document.getElementById(marker.id);
        markerElement.style.top = `${marker.top * widthScale}px`;
        markerElement.style.left = `${marker.left * heightScale}px`;
      });
    }

    function hideMarkers() {
      markers.forEach((marker) => {
        const markerElement = document.getElementById(marker.id);
        markerElement.style.display = "none";
      });
    }

    function showMarkers() {
      markers.forEach((marker) => {
        const markerElement = document.getElementById(marker.id);
        markerElement.style.display = "block";
      });
      resizeMarkers();
      location.reload();
    }

    function initialize() {
      resizeMarkers();
      resizeImageMap();
    }
  </script>
</html>
